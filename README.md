<div align="center"><a href="https://itunes.apple.com/app/id1345822611" target="_blank"><img src="./v1/images/app_store_badge.png" width="150" height="55" ></a></div>
<div align="center">或是<a href="https://testflight.apple.com/join/TDrhSSs0" target="_blank">加入測試計畫</a></div>

# 操作手冊
[登入畫面](./docs/login_page.md#o)  
[連線畫面](./docs/connecting_page.md#o)  
[主畫面](./docs/page_view.md#o)  
[工具列](./docs/toolbar.md#o)  
[看板列表](./docs/boards_page.md#o)  
[看板選項](./docs/board_options.md#o)  
[最愛看板排序](./docs/favorites_sorting.md#o)  
[信件列表](./docs/mails_page.md#o)  
[信件選項](./docs/mail_options.md#o)  
[話題功能](./docs/topics.md#o)  
[話題列表](docs/topics_page.md#o)  
[最新消息類型](./docs/new_topic_type.md#o)  
[延燒話題選項](./docs/topic_options.md#o)  
[延燒話題設定](./docs/topic_settings.md#o)  
[編輯隱藏看板](./docs/hidden_boards.md#o)  
[關注話題選項](./docs/subs_topic_options.md#o)  
[關注話題設定](./docs/subs_topic_settings.md#o)  
[編輯關注看板](./docs/subs_boards.md#o)  
[閱讀紀錄](./docs/records_page.md#o)  
[閱讀紀錄分類](./docs/record_categories.md#o)  
[閱讀紀錄顯示方式](./docs/records_group.md#o)  
[刪除閱讀紀錄](./docs/delete_records.md#o)  
[最近造訪](./docs/top_boards.md#o)  
[最近造訪選項](./docs/top_board_options.md#o)  
[刪除最近造訪](./docs/delete_top_boards.md#o)  
[最近造訪排序](./docs/top_boards_sorting.md#o)  
[分類看板](./docs/category_page.md#o)  
[鄉民名冊](./docs/ptter_page.md#o)  
[名冊選項](./docs/ptter_options.md#o)  
[水球聊天](./docs/water_polo.md#o)  
[文章列表](./docs/articles_page.md#o)  
[文章列表選項](./docs/article_options.md#o)  
[搜尋文章分頁](./docs/search_article_page.md#o)  
[搜尋文章](./docs/search_articles.md#o)  
[搜尋文章代碼](./docs/search_aid.md#o)  
[刪除搜尋文章紀錄](./docs/search_article_history.md#o)  
[文章資訊](./docs/article_info.md#o)  
[轉錄](./docs/forward_to_board.md#o)  
[看板設定](./docs/board_settings.md#o)  
[轉寄](./docs/forward_to_mail.md#o)  
[驗證碼](./docs/captcha.md#o)  
[使用者資訊](./docs/user_info.md#o)  
[縮網址](./docs/url_shortener.md#o)  
[搜尋看板](./docs/search_boards_page.md#o)  
[文章內容](./docs/article_content_page.md#o)  
[文章內容功能](./docs/article_content_function.md#o)  
[推文項目](./docs/push_item.md#o)  
[推文選項](./docs/push_options.md#o)  
[預覽項目](./docs/preview_item.md#o)  
[預覽項目選項](./docs/preview_options.md#o)  
[網址項目](./docs/link_item.md#o)  
[網址項目選項](./docs/link_options.md#o)  
[文章代碼項目](./docs/aid_link_item.md#o)  
[剪貼簿](./docs/clipboard_page.md#o)  
[文章內容瀏覽模式](./docs/ansi_mode.md#o)  
[推文頁面](./docs/push_page.md#o)  
[大圖瀏覽](./docs/image_browser.md#o)  
[精華區列表](./docs/archive_page.md#o)  
[精華區選項](./docs/archive_options.md#o)  
[精華區路徑](./docs/archive_path.md#o)  
[主選單頁面](./docs/main_menu_page.md#o)  
[帳號選項](./docs/account_options.md#o)  
[廣告設定](./docs/ads.md#o)  
[發表文章](./docs/post_article.md#o)  
[回覆文章](./docs/reply_article.md#o)  
[編輯簽名檔](./docs/edit_signature.md#o)  
[編輯文章](./docs/edit_article.md#o)  
[從暫存檔恢復](./docs/revert.md#o)  

# 問與答
[簡介](#1)  
[連線方式](#2)  
[無法登入](#3)  
[連線緩慢](#4)  
[樓層數消失](#5)  
[點擊文章與進入文章不符](#6)  
[回覆推文](#7)  
[發文或推文出現亂碼](#8)  
[實名發布](#9)  
[信件通知](#10)  
[無法開啟測試版本](#11)  
[封鎖樣式](#12)  
[點擊狀態列不會回到頂部](#13)  
[訂閱無廣告極致體驗依舊出現廣告](#14)  
[iOS14編輯文章時出現剪貼簿存取通知](#15)  

# 條款與政策
[PiTT使用條款](./docs/terms_and_policy.md#o)  
[PiTT隱私權政策](./docs/privacy_policy.md#o)  
[PiTT贊助合約與條款](./docs/subscription_terms_and_conditions.md#o)  
[PTT使用條款](https://www.ptt.cc/index.ua.html)  
  
  
##### 1
### 簡介

PTT 為 BBS 站台，原始連線方式需使用個人電腦的終端機才能連線，  
後來出現了 PCMAN 等更加方便的電腦版客戶端，  
讓鄉民可以更便捷的瀏覽 PTT。  

PiTT 為第三方手機版瀏覽器，由於現今社會大眾傾向於使用手機上網，  
是為了讓鄉民能享用更加的使用者體驗以及更直覺的介面設計而開發的 App。  
  
[返回頁首](#問與答) 

##### 2
### 連線方式

PTT 的連線方式有很多種

1. Telnet 
2. SSH
3. WebSocket

Telnet 是使用明碼傳輸，也就是有心人只要想就能知道你與伺服器間傳輸的所有資訊
速度最快，安全性最低，也是大多數 App 的預設連線方式

SSH 是使用加密傳輸，速度一般，安全性高，也是 PiTT 的預設連線方式

WebSocket 有加密傳輸與明碼傳輸，PiTT 使用的是加密傳輸，速度一般，安全性高  
  
[返回頁首](#問與答) 

##### 3
### 無法登入

1. 重複登入帳號數量過多(3個)，若出現刪除重複登入提示請選擇刪除
2. 請到設定 - 連線 開啟僅使用 ptt.cc 位址連線(若有在中國使用請關閉) 
3. 網路環境無法使用 SSH 連線(port 22)，請確定使用的網路環境可以使用 SSH 連線
4. 被手機內安裝的系統管理應用程式阻擋，例如防火牆，背景服務限制管理，OperaMax ，擋廣告 App 等等(某些版本會導致頻繁斷線，可在 MobileComm 看板搜尋相關案例
)，Android 系統的限制背景連線也可能導致無法連線
5. PTT 伺服器維護中/過載
6. 重新開機重置裝置所有連線（台哥大、遠傳常使用到被 PTT 封鎖的 IP 位址導致無法連線）
7. 更換連線功能（SSH/WSS）
  
[返回頁首](#問與答) 

##### 4
### 連線緩慢

#### 給懶得看的人的快速結論就是到設定內改為使用WebSocket連線
#### 測試最高紀錄為一秒內登入完成
#### 最主要的影響還是PTT伺服器本身

PTT 的連線方式有很多種

1. Telnet 
2. SSH
3. WebSocket

Telnet 是使用明碼傳輸，也就是有心人只要想就能知道你與伺服器間傳輸的所有資訊
速度最快，安全性最低，也是大多數 App 的預設連線方式

SSH 是使用加密傳輸，速度一般，安全性高，也是 PiTT 的預設連線方式

WebSocket 有加密傳輸與明碼傳輸，PiTT 使用的是加密傳輸，速度一般，安全性高

說了這麼多，為什麼會有人覺得 PiTT 登入慢，有人覺得 PiTT 登入快呢？

#### 重點來了

主要是因為在 SSH 連線方面 PTT 站台有限制登入處理的數量，  
在同一時間登入人數過多時就會需要等待，  
直到前面的人登入完畢  

舉例來說 當處理上限為一百人 而你是第一百零一個登入的人，  
你必須等待到第一個人登入成功後 PTT 才會開始處理你的登入動作，  
同時第一百零二個人順位就往前移動一個位子，  
這就是為什麼 PiTT 在某些時候不容易登入的原因，  
就是因為人太多而受限於站台本身的行為  

要解決這個問題只要到設定內修改為使用 WebSocket 連線即可  

那為什麼不設定為預設連線呢？  
因為站方目前還是把這項連線方式定位為實驗階段，  
如果設為預設連線而站方停止測試，  
那還不知道有連線方式可以調整的鄉民就會覺得 PiTT 壞掉了  

電腦版 SSH 連線緩慢情形

<div align="center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/Lhxv-8UnKew" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>

手機版 WebSocket 正常連線情形

<div align="center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/CdeTuOhO60o" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>

#### 關於重複登入

另外提供一個有關重複登入的資訊  

PTT 允許的重複登入連線只有三個，  
超過這個數量再選擇「允許重複登入」那個瞬間就會把你目前登入中的連線斷線，  
所以在連線失敗連續超過三次時 PiTT 就會強制跳出重複登入選項以供使用者選擇「不允許重複登入」，  
避免使用者卡在登入 - 被斷線的循環  

而在選擇不允許重複登入的時候常常有人覺得這裡卡很久，  
其實這也是 PTT 站台本身的限制，  
但我也不清楚 PTT 在處理哪些資訊，  
可能是重複登入帳號間的資訊同步作業讓這個動作花了些時間

以上就是關於登入的小知識  
  
[返回頁首](#問與答) 

##### 5
### 樓層數消失

PTT 本身沒有支援樓層顯示，  
應用程式內的樓層數與推噓數都是由程式自行計算出來的，  
使用 End 之後是由文章最末頁開始讀取，  
因為無法讀取到第一樓所在位置，  
所以沒辦法計算樓層數為多少，  
推文後預設以 End 重新整理，  
因此同樣無法顯示樓層數，  
Home 則是重新整理後由文章第一頁開始讀取，  
所以可以依序計算樓層數與推噓數  
  
[返回頁首](#問與答) 

##### 6
### 點擊文章與進入文章不符

如果是搜尋推文數狀態下點擊文章的確會出現這個問題喔，  
因為 PTT 的文章序號不是固定值，  
而推文數搜尋的異動情況也比較多，  
所以如果搜尋結果有異動就很可能造成點擊文章與進入文章不一致的情形，  
例如原本搜尋 50 推以上有 5 篇文章，  
但在手機上顯示結果後 PTT 伺服器多了 3 篇 50 推以上的文章，  
而這幾篇文章的時間又比較新的話就會改變其他文章的序號，  
這個算是手機版實作上的一個限制，  
不過只要重新整理後就可以恢復正常了  
  
[返回頁首](#問與答) 

##### 7
### 回覆推文

PTT 本身沒有回覆推文功能，  
一般都是使用編輯文章功能自行在推文下方輸入回覆文字，  
編輯文章介面可以從文章內容介面展開按鈕後點擊「編輯文章」進入，  
長按推文後會顯示編輯介面，  
在推文日期後方輸入換行符號再輸入回覆文字即可，  
編輯完成後 PiTT 會顯示預覽並檢查是否有將推文改壞掉，  
不過編輯功能有點複雜，  
建議可以到 Test 看板熟悉編輯功能操作後再行使用，  
包括標記、刪除、回復上一個編輯版本等等  
  
[返回頁首](#問與答)  

##### 8
### 發文或推文出現亂碼

發文、推文出現亂碼！！！  

最近偶爾會看到出現亂碼的文章或推文，  
然後底下就有鄉民推文開玩笑說：一定是用XXX發文的！  
之前也有一些使用者有回報出現亂碼的問題，  
乾脆在這裡再發一篇較完整的說明。  
  
其實，不管使用的是哪一款 PTT 瀏覽器，  
只要您輸入的文字是 PTT 系統本身不支援的字元，  
就會出現亂碼。  
也就是說，如果您輸入了某些"罕用字"就會造成亂碼的情形，  
即使您使用的是家喻戶曉的 PCMAN 也一樣，  
但 PCMAN 是即時顯示 PTT 回傳的內容，  
所以在輸入或貼上時就會立即出現亂碼或是根本無法輸入。  
  
最常出現此情形的是使用超注音的使用者，  
可能應用程式本身預設就有開啟罕用字的支援，  
而在自動選字時又會將罕用字排在第一順位(跟使用者自選詞也有關係，不能說全是超注音的問題)，  
所以常常出現此情形，  
最常見的例子，就是之前使用者回報的 "會" 與 "㑹" 兩個字，  
前者是 PTT 有支援的字元，後者是 PTT 不支援的字元，  
特別的是，PTT 是使用雙位元組呈現寬字元(也就是中文字)，  
而 PTT 看不懂的字元在輸出時就會將字元位元組隨意組合再輸出，  
因為正確的編碼被拆掉了，  
在頁面上原本 "㑹" 字本身以及其前後的文字就可能會呈現為亂碼，  
PCMAN 使用者可以在推文時試者貼上 "哈會哈" 與 "哈㑹哈" 看看差異，  
"㑹" 字後方搭配不同文字各有不同樂趣。  
以更簡單的例子來說，  
就是強迫一個不懂英文的人唸一段句子一樣，看不懂他就會亂念。  
  
基於以上原因，  
只要使用者從輸入法設定內將罕用字支援關閉就不太會出現此情形了，  
有些例外是當使用者從網頁直接複製貼上內容時也會出現亂碼，  
這個情形可能是複製的文字內容中也包含了某些不會顯示同時 PTT 也不支援的字元在內，  
這點就只能請使用者自行注意囉  
  
[返回頁首](#問與答) 

##### 9
### 實名發布

實名發布為沿用PTT的名詞，  
這裡的「實名」是指是否要在發文時顯示ID，  
只有在匿名看板有作用，  
因為匿名看板有規定某些分類的文章必須顯示ID發文，  
此時就需要勾選實名發布，  
一般看板預設發文時就會顯示ID，  
所以有沒有勾選都沒有影響  

[返回頁首](#問與答) 

##### 10
### 信件通知

#### 請開啟 App 通知權限

PTT 的信件通知與水球通知不一樣，  
只有在頁面切換時才會顯示在畫面上方，  
因此只有在操作 PTT 時才有辦法讀取通知，  
例如讀取文章、看板列表、文章列表等等，  
若在通知已顯示的情況下，  
必須要在讀取最新的信件內容後才會重設通知檢查狀態，  
其他 app 都是在背景固定一段時間自動連線至 PTT 檢查才有辦法主動通知，  
但此方法會佔用 PTT 過多資源，  
由於 PTT 沒有向開發者收費，  
所以會盡量避免加入這類背景自動讀取資料的功能，  
以免造成伺服器忙碌而影響到其他使用者登入使用的權利。  
  
另外一方面，此類背景自動檢查功能都有幾個特性，  
需帳號密碼供自動登入以及固定時間或頻率連線，  
這些行為容易讓 PTT 伺服器判定為機器人帳號進而被退註或是停權，  
自動登入功能也可能讓不肖使用者用來養分身帳號，  
這都是開發者需要注意與把關的部分，  
而不是為了增加下載數、衝人氣就毫無原則的加入使用者要求的所有功能。  
  
PiTT 有另外加入「即時信件通知」功能，  
只要對方使用 PiTT 發信，  
有安裝 PiTT 的使用者就能即時收到信件通知  
  
[返回頁首](#問與答) 

##### 11
### 無法開啟測試版本

iOS Beta (TestFlight)的每一個版本都只有90天的使用期限(自上傳送審日起算)，  
因此請盡量維持最新版本，  
另外若更換裝置或是使用 iCloud 復原裝置都可能導致 TestFlight 憑證錯誤，  
此時只要移除 TestFlight 與相關 app 後再重新安裝即可  

[返回頁首](#問與答) 

##### 12
### 封鎖樣式

不完全隱藏黑名單是為了避免 App 刻意隱藏某些特定資訊的疑慮，   
若有顯示隱藏哪些項目，可以讓使用者更安心，   
另外一點則是方便使用者隨時解除隱藏狀態，   
除了永久解除封鎖，PiTT 還有暫時解除封鎖跟超級好友（同時加入封鎖與好鄉民），   
這些功能都需要保留封鎖項目才會更方便。   

若真的不想在推文看見某些帳號，   
可以查詢該位鄉民後編輯「別名」項目，   
即可替代帳號顯示。  

[返回頁首](#問與答) 

##### 13
### 點擊狀態列不會回到頂部

iOS 點擊狀態列的功能實際上為「回到第一列」的功能，  
但因為 iOS 的元件本身沒有支援反向瀏覽，  
導致沒有使用者用過從下方開始載入資料的 App，  
所以讓使用者誤以為此功能為回到頂部。  
PiTT 使用反序列表或文章內容的 End 功能後都是從下方開始載入資料，  
因此點擊狀態列會回到最下方（第一列）才是正常的情況  

##### 14
### 訂閱無廣告極致體驗依舊出現廣告

此問題通常是因為使用了多重帳號登入 Apple ID、iTunes 與 App Store，
導致無法連接 iTunes Store 取得收據造成的。
或是使用了網路管理 App 導致伺服器驗證失敗，例如：流量管理、防火牆、VPN、擋廣告或是設定了錯誤的 DNS。

排除網路問題後可以嘗試以下步驟：

1. 確認 Apple ID 與當初購買的 ID 相同
2. 確認 iTunes 帳號與當初購買的 ID 相同
3. 確認下載 App 時使用的帳號與當初購買的 ID 相同
4. 確認 iTunes 為最新版本
5. 確認系統時間正確（使用自動從網路更新時間）
6. 點擊驗證收據
7. 若無反應，請點擊更新收據（下方工具列從左邊數來第二個按鈕）再點擊一次驗證收據
8. 以上動作皆無法恢復，請進行退款  

另外有收到一個例外情況，使用者回報在 Apple 開發票前都無法正確進行收據驗證。  

##### 15
### iOS14編輯文章時出現剪貼簿存取通知

最近收到鄉民提醒在更新至 iOS 14 後編輯文章時出現了存取剪貼簿的通知，
在此說明 PiTT 存取剪貼簿的用途與原始碼。

![Image of Editor Source Code](../v1/images/editor_source_code.png) 

首先說明介面上的元件：

畫面最上方為搜尋框，右方的「1 result」代表目前的檔案裡面只有一個符合的結果，
而符合的結果就顯示在下方以綠色方格框起來的文字，
證明 PiTT 編輯文章的相關程式碼只有這裡會存取剪貼簿。

接下來針對原始碼的部分做說明：

func textView(_ textView: UITextView, shouldChangeTextIn range: NSRange, replacementText text: String) -> Bool

這個 method 是 iOS 的文字編輯元件的 delegate，
在文字編輯器的文字需要進行異動前會進行呼叫，
文字上色功能就是在此進行處理的。
* textView - 文字編輯元件
* range - 文字編輯範圍
* text - 新增的文字

else if text == UIPasteboard.general.string

此段程式碼以白話來說明就是「當 text 等於剪貼簿內的文字時進入此判斷式」，
這裡的用意在於比對剪貼簿內的文字是否為目前新增的文字，
由於貼上來源可能是網址或其他 app，
而 PTT 能夠支援的文字編碼是有限的，
所以要在此進行預先處理，避免有造成 PTT 顯示為亂碼的字元出現在編輯器裡面，
並在之後進行上色處理，

applyTextColor(textView, content: newText, range: range)

若使用者有使用文字背景顏色時，
貼上內容的換行符號會造成後方空白一併被上背景色，
所以在 applyTextColor 這個 method 裡面也會做進一步的上色處理。
也就是說 PiTT 其實並未取得剪貼簿內的文字並將它儲存起來，
至始至終都是處理使用者輸入的文字，
請各位安心使用。  

[返回頁首](#問與答) 